services:
  taskdog-server:
    build:
      context: ../..
      dockerfile: contrib/docker/Dockerfile
    ports:
      - "${TASKDOG_PORT:-8000}:8000"
    volumes:
      - taskdog-data:/data
    environment:
      # Database (default: /data/tasks.db in container)
      - TASKDOG_STORAGE_DATABASE_URL=sqlite:////data/tasks.db
      # Business hours (HH:MM format)
      - TASKDOG_TIME_DEFAULT_START_TIME=${TASKDOG_TIME_DEFAULT_START_TIME:-09:00}
      - TASKDOG_TIME_DEFAULT_END_TIME=${TASKDOG_TIME_DEFAULT_END_TIME:-18:00}
      # Region for holiday detection (ISO 3166-1 alpha-2, e.g., JP, US)
      - TASKDOG_REGION_COUNTRY=${TASKDOG_REGION_COUNTRY:-}
    restart: unless-stopped

volumes:
  taskdog-data:
